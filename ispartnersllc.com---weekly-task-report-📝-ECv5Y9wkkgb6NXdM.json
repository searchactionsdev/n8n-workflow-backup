{"createdAt":"2025-01-15T14:45:12.143Z","updatedAt":"2025-01-15T22:11:50.000Z","id":"ECv5Y9wkkgb6NXdM","name":"ispartnersllc.com - Weekly Task Report 📝","active":false,"nodes":[{"parameters":{},"type":"n8n-nodes-base.manualTrigger","typeVersion":1,"position":[0,0],"id":"e6b96557-52d1-47a8-8503-784ad7c708c0","name":"When clicking ‘Test workflow’"},{"parameters":{"operation":"getAll","team":"8402285","space":"90090491534","folder":"90171429336","list":"901700155913","filters":{"orderBy":"id","statuses":["doing","in review","done"],"subtasks":true}},"type":"n8n-nodes-base.clickUp","typeVersion":1,"position":[260,0],"id":"a65e3a45-ace5-4337-b44b-3e9853b1d876","name":"Getting ISP's Tasks","notesInFlow":true,"credentials":{"clickUpApi":{"id":"slBwFS9XTOvzT7rj","name":"searchactions.com"}}},{"parameters":{"assignments":{"assignments":[{"id":"a3449640-20d0-4793-a49a-c2a438317e63","name":"id","value":"={{ $json.id }}","type":"string"},{"id":"91cabb4b-2075-421f-b2f0-5a953e04980b","name":"name","value":"={{ $json.name }}","type":"string"},{"id":"f5e2ce28-8cc3-4ee5-93f5-18635e97b36f","name":"parent_id","value":"={{ $json.parent }}","type":"string"},{"id":"f1b6c672-1354-4434-b278-127d32057983","name":"date_closed","value":"={{ $json.date_done }}","type":"number"},{"id":"28c6de3d-c72e-4f7d-8e1b-9d9f8b9f50e8","name":"status","value":"={{ $json.status.status }}","type":"string"},{"id":"41912f38-2403-4f0c-b856-44fa91e42950","name":"custom_fields","value":"={{ $json.custom_fields }}","type":"object"}]},"options":{"ignoreConversionErrors":true}},"type":"n8n-nodes-base.set","typeVersion":3.4,"position":[800,0],"id":"57fe9d8d-86e6-4d9e-95c7-4bdf71afa3f8","name":"Extracting necessary values","notesInFlow":true},{"parameters":{"jsCode":"let tasks = $input.all()\n\n// Finding task types \nfor(t of tasks){\n  const task = t.json\n  let task_type = null\n  for(field of task.custom_fields){\n    if(field.id === 'bb1e9573-2d91-48a9-9b55-0b6aa228b71b'){\n       const options = field.type_config.options\n      const type = options.filter(option => option.orderindex === field.value);\n      if (type.length > 0) {\n    task_type = type[0].name;\n  }\n\n    }\n  }\n  task.type = task_type\n  delete task.custom_fields\n}\n\n//filtering the ones that do have type\ntasks = tasks.filter(task => task.type !== null)\n\nreturn tasks\n\n"},"type":"n8n-nodes-base.code","typeVersion":2,"position":[1080,0],"id":"2625c747-482b-4671-b06d-095d11a1d672","name":"Formatting Tasks"},{"parameters":{"conditions":{"options":{"caseSensitive":true,"leftValue":"","typeValidation":"loose","version":2},"conditions":[{"id":"8c74656d-cba0-4cbc-8fcd-ecb3eea93443","leftValue":"={{ $json.top_level_parent }}","rightValue":"","operator":{"type":"string","operation":"notExists","singleValue":true}}],"combinator":"and"},"looseTypeValidation":true,"options":{}},"type":"n8n-nodes-base.filter","typeVersion":2.2,"position":[520,0],"id":"2acd4cb6-f72c-4d52-b300-99c67cbc2bf5","name":"Filtering only Parent and Subtasks"}],"connections":{"When clicking ‘Test workflow’":{"main":[[{"node":"Getting ISP's Tasks","type":"main","index":0}]]},"Getting ISP's Tasks":{"main":[[{"node":"Filtering only Parent and Subtasks","type":"main","index":0}]]},"Extracting necessary values":{"main":[[{"node":"Formatting Tasks","type":"main","index":0}]]},"Formatting Tasks":{"main":[[]]},"Filtering only Parent and Subtasks":{"main":[[{"node":"Extracting necessary values","type":"main","index":0}]]}},"settings":{"executionOrder":"v1"},"staticData":null,"meta":null,"pinData":{},"versionId":"3d81c8db-50cf-40b0-a332-27c746424352","triggerCount":0,"tags":[{"createdAt":"2024-09-16T17:47:31.046Z","updatedAt":"2024-09-16T17:47:31.046Z","id":"S6G5nzOVVSQAgvEd","name":"ispartnersllc.com"}]}